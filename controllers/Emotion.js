const Error = require("./Error");
const {RefreshCredential} = require("./RefreshCredential");

class Emotion {

    /* PLAN: Find the emotion with largest value possible.
    * -> (MATCHING OR OPPOSITE) ANGER plays aggressive, harsh music or neutral's
    * -> CONTEMPT plays ???
    * -> DISGUST plays ???
    * -> (OPPOSITE) FEAR plays calm, ambient music
    * -> (MATCHING OR OPPOSITE) HAPPY plays happy music or sad's
    * -> (MATCHING OR OPPOSITE) NEUTRAL plays calm, ambient music or anger's
    * -> (MATCHING OR OPPOSITE) SADNESS plays sad music or happy's
    * -> SURPRISE plays ???
    *
    *
    * */

    //#region Emotion Map
    emotionMap = {
        anger: [
            "4JIo8RztBbELr2gWJ5OGK6",
            "7CyjnShHBqLFDJtSfLfaG5",
            "7LIrcavrkyIrlmCnc7EIMo",
            "4ZUYHEfvnw3ShD74UzPrQw",
            "63tdOio6UnzHHgtBtQt2In",
            "2z8YnF6wRLwMhq0YQSEY78",
            "5gT22wURmXcioHWn7HIWhq",
            "4K3qzy3AR3Lo02ybxs90gW",
            "3dKhxFouQdA6MGtb1ksdFo",
            "7t5riom6kdqXkb1VzTlAaH",
            "4CSuYnPwxhUrVLWUtwbNw1",
            "4esOae7i4rqTbAu9o5Pxco",
            "26E1JSa1rmqadkaMgxeTDN",
            "1HIltntwioJoDMsHBmH0Bl",
            "0w5pghaDUcG3hRPJaOHlLc",
            "76n6nTGl9uYZ7XxHFNOxf6",
            "5IRmF5XVNWFlov7i7C3r2c",
            "0HZhYMZOcUzZKSFwPOti6m",
            "151BJY0bBOE0pZrHXqLxrS",
            "5B8rCN8Ee8kZR3taJHkkFh",
            "100WXBiJbtUUQX9KWZPNLb",
            "0DKQvjWmIPjV7rsQVzlp0y",
            "3SypDWp8cRyXemFer9dQuH",
            "2KGH9mcrOpe678C5SzTmgM",
            "0gJvqi9QyASOCtJu99tytc",
            "4lNznSUjByH5zWpPZFFeff",
            "4Mu0pKQazFpfWSzjBUGVbA",
            "6gDXbcILAyBa2skSdbUYq7",
            "5ZZqPBNUHwGYVKS6ucjjNH",
            "4w2sOKmotzKsdGDLHic94B",
            "3ztZNULykf6ijrqJRcfZAJ",
            "1Ap1WhvywUUbbXOF271vk4",
            "2MZa9nS4WjZjxmN11iDQD0",
            "26Zco2DqGMnDIjOX0aIqER",
            "61aetRitUNw4ZO2ZwbwPtl",
            "1hAnBUMPk1EMEeEiVIy2f9",
            "499kro0PaMcHVTIPuNJqKu",
            "3AHm9YdMDhM9PKFqkHmb98",
            "19fCZI1UbXYP4kESLq80bf",
            "2nveQ420oSRxmqdcn92WBn",
            "7Km1CYpwUzXRsCAhi9igjF",
            "1JCCdiru7fhstOIF4N7WJC",
            "3TCauNPqFiniaYHBvEVoHG",
            "44BpmdcfqbgqnuaLhjJRbH",
            "1WbtvEZtC9RHomUoNrybc4",
            "5hvMzZgguyZpHR09Vw2wwy",
            "45JecldOeYS7rYzyhQAIhe",
            "2C3W424vvtwNPVA2o2aJXe",
            "1JiS9XUED8DGFQfmXPB78L",
            "6hfNTU12i4U4yY96uY7amf",
            "4zjTHxTPAufRcIYt53dLcH",
            "3YJAEuOA3l7qZGmA1Rsw1A",
            "5B1wDrbvdJdocWJDOf0t5x",
            "5mYlI12Gf0egAuUc8RRryZ",
            "5nERUGtVswJAKRBXLWuZWO",
            "78oF7KjxHMJHtiwgc2I3rw",
            "31eWx2iRxDKYAXJNYuyVec",
            "1uxjdr8oxqu5Ov1ICOYLJD",
            "5FNfSUbNBjVk2EqCe9j2Co",
            "4TZrJQaO3zG1z69YHF4ZSh",
            "4DUF5hZMBIcAmEF5MAfqzx",
            "4UPcXTh26ilb7owtuyHqNI",
            "7lLfaxlcRLf4XeHFZc7BQ0",
            "2GbDas4nWZhaP7mqyeB6uI",
            "3NLUCyLS1HLrzkbsKg30lJ",
            "451VHGXFNJl92TQ6nxWV0S",
            "75xgoXAGed7jiNDdV8TNOe",
            "3azjJtSvvNniFZEjMZnRPb",
            "1jyeknQl9iy8sfUafUW5f3",
            "2pj2VXKSBRTmV8nuiaCKd2",
            "3gf9aiCDqZ9Y5XNeXt79nv",
            "6t91thNdGFuMdDCNTIj5MR",
            "59mAOFlD6Qg0ygG5l3BdCS",
            "5316Jxdg95Bt9VeGuioYuf",
            "55z8YmB6aRSQuoC0e5iZ1c",
            "4SXbZbMoKTaBAFcsbSkdc4",
            "3ytqID1T478uv1aZoHaDZS",
            "1YcwDodDzFBQ4evAGZonM7",
            "5oXLtUCb5sEXR1lCuc1HVP",
            "5gBbSMvARlWJMQO2fQolKY",
            "2UnDZRV3PKN1Fa6q9lQOV8",
            "26c6Tf8IETskDcRuxWfruY",
            "6UeAJX3rjI3Om8mvKeMItm",
            "50zneZX4lIAuBklFwHXz1k",
            "1COLAXqAZTKPv3S75XYgLp",
            "6czQu0j3TmissE2WviXPMi",
            "6Q5j7UxkHMETQrn1ZCuoCE",
            "5aHrO7mkMbu4B3pMptIiFD",
            "2i7Wseoe4SNpNaN0AScC12",
            "7wm7di7XtlL3IXRWPL9H4T",
            "2Q73wKbwLLcGS404gkTfjH",
            "2o0V0AATmWmCmMOAFWDuEV",
            "2kW45RgvG6cGkyAfq9ZlsZ",
            "7rVUSUnmXsiRnbnFuW99Vr",
            "5QtzoX9E49EfnhcsxrA9zT",
            "4uOSpJxcpzeNCWXYoXGJM1",
            "65EIJff50L1YnijWPTOPMz",
            "2zAwUhDReRPaubkOohIPqU",
            "5iV7MYBfzSIPLeP3nzNQYp",
            "02Ldz6s7reMiMFThegV6Gu"
        ],
        contempt: [
            "3dKhxFouQdA6MGtb1ksdFo",
            "3JTMWdhcJPiegDSe7SvZS3",
            "5GorFaKkP2mLREQvhSblIg",
            "3FteycP8CaXS1MhjcXekVT",
            "2Bs4jQEGMycglOfWPBqrVG",
            "03LNtELU3mftqFQw8qYqrW",
            "1bGPsZ1ovzKvunErdUY2Ep",
            "1YcwDodDzFBQ4evAGZonM7",
            "3TyVsgXOIeM6xwmflnC9cn",
            "3a9dxgyM2rbFUvmN35qTTj",
            "3ZE2F2FEWk1QzgQWMnM6hJ",
            "5A0aUvnfAEcmUx3hoXjI8R",
            "6VrLYoQKdhu1Jruei06t65",
            "6lanRgr6wXibZr8KgzXxBl",
            "1AM1o0mKbgAK5oMpY8B3Z7",
            "7zKweXON2KcgXizqUcu7lf",
            "21cOsclx0lCGRtDghaoqMJ",
            "2Kz5qeXifBxE0zmuoVchlM",
            "6h3lMAmmpQDFqoHk9F99IR",
            "2fQxE0jVrjNMT9oJAXtSJR",
            "5dXmPzPDTMWmxmpzxAV1JZ",
            "19fCZI1UbXYP4kESLq80bf",
            "0mUPCLUjXi0p69Ipepe98p",
            "174rZBKJAqD10VBnOjlQQ3",
            "1GrikfH0jDejDvrxo84n4P",
            "4TZrJQaO3zG1z69YHF4ZSh",
            "6gj08XDlv9Duc2fPOxUmVD",
            "4L55p6txv9vuCWhpNnY6eY",
            "7vcsvglwZxtpdEXKZSlDDB",
            "4E6wpXABj8XosZEPXZz2OK",
            "2E6aT3ZfA5jkjLgB51qyFy",
            "3avYqdwHKEq8beXbeWCKqJ",
            "7aiYJcVUNqg0YayOD6gkyg",
            "3XG801WWhqC753dekEBkMt",
            "67zT3NI4tTOj8GreXetF6s",
            "0YEsfwQpG7ofdIiHWA0dHi",
            "7juCZpPi4C3Lsr8jiCfVVT",
            "6wJwkMo278iWVlWl1XQ4WA",
            "2U8NXPTXZWG2O0ye2sYRiH",
            "7cm9dWMHIJnRwFxkFCVHhm",
            "1zv3WFUbZ5vPxFq9I2jAU1",
            "6UeAJX3rjI3Om8mvKeMItm",
            "0AXym3uMYhCOngivsnwjkz",
            "7861kBrZ5aw7o4NfggcyYW",
            "2P50Qwq7Q59Ickhz7knL9T",
            "7dVF4ntkKdoynV9fq6o2Zj",
            "7ffYxGlHGeBLqdDN3aLwxy",
            "4XcGTjRucN39FvHMgIznOU",
            "6MBEjJlXQYXr8dfxDvZuoA",
            "5FJlVqsN2jQBu8uRpy3GqG",
            "2afCBiru10AFckfOa49wIa",
            "05CrK6Q5VGtfPDtyQFJ4Kf",
            "36AWdhZIGLUTkWpJDhe7va",
            "0q3lwFiwQYQynThTulLKGN",
            "5t54WbqXtMwT5yF1nQSuKz",
            "6rGYtoOPyJKpcq8ZP5pFc0",
            "4v5kAh2wWyCSuKuhMJK8u6",
            "3L5cI77zVcoYQqoVx7fTm1",
            "5zwyCVmihRh2sme6VocmnW",
            "6FzUX4kFBss56SSjAsLi7t",
            "0jsANwwkkHyyeNyuTFq2XO",
            "0TwBtDAWpkpM3srywFVOV5",
            "7lylZyx3PtBVq9YpioPVMD",
            "78Liq9m8u6xjuamJIeznTd",
            "4j1Bk0BEIGCF9hR7cSwl9d",
            "34M02dzGv4LoiHoE4stmp9",
            "4C4NQSUPO77nRBaJNm7nvB",
            "2OsEJFTfzfjG4oC92cuP2c",
            "48zi76YORvpiYO67liH70R",
            "6JvrOdeiEqWyCta29Xc4mR",
            "1QV6tiMFM6fSOKOGLMHYYg",
            "3sSonVXqDeoEFj2lM7mpYT",
            "5ecZWU5uQOiCVSnPxBZNmT",
            "7DSfv2r0Km90N97qlRTxou",
            "5lS7KHsdvkMJp8eASqZWzb",
            "00nhkvorbdardFjuIi2OOo",
            "3dFwpxh2yH7C7p9BGEKLVB",
            "1D5KBrIfZZ47eR32X13xrZ",
            "7ziHnshbknkpFLDW5yGBjO",
            "66QwmGPVzRZRroovq8VpdG",
            "0v1FiNbsrogBpgITmV9qTG",
            "2fSYadDsbWMtIVqX7flKIc",
            "33vzOPcd9FRirYGlCu32x4",
            "2ia7iiEtpiOL2ZVuWxBZGB",
            "2poGmRY7y5byGaQe2glZ0t",
            "7pkfI6EBAXSky18QiaFYw0",
            "5B1wDrbvdJdocWJDOf0t5x",
            "5UKGE3tI0s5Lq0Puf6Fn0S",
            "3CJvmtWw2bJsudbAC5uCQk",
            "0w5pghaDUcG3hRPJaOHlLc",
            "47ol79eUgm4O3y0TxGyiZF",
            "4nVBt6MZDDP6tRVdQTgxJg",
            "7uKcScNXuO3MWw6LowBjW1",
            "3SypDWp8cRyXemFer9dQuH",
            "0W4NhJhcqKCqEP2GIpDCDq",
            "2zAwUhDReRPaubkOohIPqU",
            "7GaFYUqP2WdR4KTPk7cXoP",
            "45JecldOeYS7rYzyhQAIhe",
            "0GBNecHv0jWlfrPPBq57FT",
            "2jATUzETZL49e6SywauZKE"
        ],
        disgust: [
            "7iXehQAqsHO8xwGUcnZpHW",
            "0dpFb4qv92TE9R00Lq4SAW",
            "2abSIRLYyz5YFr6TCSTaFd",
            "0w5pghaDUcG3hRPJaOHlLc",
            "1ZzC86R3PE8fEbZpLXxenI",
            "2pj2VXKSBRTmV8nuiaCKd2",
            "430xmK8Tw4J4VG8PxCqO4I",
            "1mjC68qU0Q9HlCIZHZAEko",
            "0MU1TyyAbuoXLGiQBgW9CI",
            "5PIMA99MIh2ixNf4K18cCH",
            "30lAGXMytmKjGVZk9BBC3m",
            "7vNiCVFghw336cXSXVqiGG",
            "4w2sOKmotzKsdGDLHic94B",
            "1BExV8JprNJLvLeDE9qdEW",
            "1ENLIbxO4Uma773neTHxbp",
            "1HIltntwioJoDMsHBmH0Bl",
            "57fqmDaokbxZ3TaB0jp39q",
            "1yQunV0upd4Eyu3rcOerD9",
            "3IZBKlaSGIJUo5soOAHmEY",
            "79FdyI4F44GFPI6HGFfCfA",
            "7cgu4JBW3hq1GwTM1ilkKQ",
            "1ZfnGTUnha3QHj3KFmub0W",
            "3gwquM6glSvyE3re9LoEGh",
            "4UzVcXufOhGUwF56HT7b8M",
            "6nULLS7CipGMSzgQDxDpd1",
            "0asHedzNrLSCVDq0SW5gwy",
            "2tYG7soHsohgQs4Xof9QOB",
            "0gAV3a4d7PPkXo1E9KLmxF",
            "1Fj3SwH4PwLL0N1y6e0ojz",
            "5IO423fjmlTPPpZCtV6rhe",
            "6c1hKkBNxNOL7Nv8kINyas",
            "4JIo8RztBbELr2gWJ5OGK6",
            "2uenkeJMEfGmjebYnewnlE",
            "25I6CiICRyGB0K7E9c7Ho0",
            "4lNznSUjByH5zWpPZFFeff",
            "0I8heLJP9YJqTg5308qKEz",
            "14hJ5tc1VCFMWhVn9axRTC",
            "2jfYVyExxd0j61Qm5TZi6V",
            "7sxiG6BuAb28nh3qGmbz7L",
            "5nksa8EqKHSWO9WBj6DnmS",
            "6AlUhxZG6lcSBJlFEG2Mgp",
            "3A03glw2TkAki6zEbkXZkc",
            "5AdoS3gS47x40nBNlNmPQ8",
            "6oNPnS3cxhRNAwGCoX4m9R",
            "3kBV6iIyeT5SCvGcVyg4pJ",
            "0eKyHwckh9vQb8ncZ2DXCs",
            "0bHYX16vAFaFhtEqKhCeqg",
            "4ndOMbxPz8SlQn0EYRzBWB",
            "6b6uLZsoGhObYexIxnRbIb",
            "1yibGVA3FlGySYObOkMdzc",
            "0TvcIlBxvXqfvy8mk36nQk",
            "5dTHtzHFPyi8TlTtzoz1J9",
            "1nF799xuckKAddjI8JA4Ct",
            "2F6FfZ4w8z3eJpSxPotVO5",
            "3XVBdLihbNbxUwZosxcGuJ",
            "4PWxt9Fy949kUtkEi2GI5V",
            "3Xfg7AegXaDLoD5GOUMf2e",
            "3nlT74t8h4XlV1D72pErhj",
            "1JCCdiru7fhstOIF4N7WJC",
            "4YvzltIBqtA7CobNtRFIsA",
            "04lIJwNlGIxS0cCMmxCsEX",
            "0V1WiVp8DRjv8M9nhblTgR",
            "1erRDf98WX0VllciGPYO1H",
            "2dQUNg3OGqVXrfjDpgJcCu",
            "153SwL1d9SfCLWhqIs08we",
            "2Uxh6Vjw0GJgmnV2GW9N5y",
            "0rzMHOoTHTEuIIemojtn5K",
            "1EZs2t6k55zUFbhX5jEJkg",
            "0L7zm6afBEtrNKo6C6Gj08",
            "1VRnW4Qk8PP3EGGFMs6Z32",
            "1iDugXsvJ2cb5snhHP3t41",
            "6FOpPA0a80RuBqqgDozvja",
            "73HWH7cgqKwk5v4nB4dEzL",
            "0lCwaZYSRy6q0jLmnYiQxi",
            "7KRnJW2x33Mb84NavoKmbh",
            "4hkZMpR9ptEQLqlIorFPeN",
            "4Yx9Tw9dTgQ8eGCq3PRDyn",
            "2NVQbNEmJ0ZVulQOpWa0PD",
            "3UerZr7GF7qO2hQf6FwEbz",
            "1sjugVd9Yw0cPM7iiuSaXw",
            "4esOae7i4rqTbAu9o5Pxco",
            "0DhsBWaVj3Fk4gzUzngAmP",
            "1HNFInFeXqddmDRqvlelGQ",
            "7a7nlgfjoeEtIAW0QJzU4m",
            "5Yq6o938MU67LT4XeqjiTT",
            "235eysQ30Aag46SBMR0kHL",
            "0AfIsqZ4gTUg9CwwW2jLeK",
            "0r4isq3KTWl2f8p5kLmGCD",
            "6OnuIoARBXC6FOX8DRv5bC",
            "26oitHKSO201oxuDnUfcMR",
            "6IwKcFdiRQZOWeYNhUiWIv",
            "52DKRgSDIyvacToVErwWg5",
            "7lu2J32qRCqH09VuBCuhM9",
            "1MdC1WDXrEzrpQwxb5mEXC",
            "0xwfDhU1YaXmNFnwhToFrT",
            "2bBUHwOa8alimc1TiXg1oY",
            "4DfUmbnnxpRlwLsFYfmGfn",
            "04EtBLFIxbcVt9NdYgcrpF"
        ],
        fear: [
            "3LntA1x0dyivFLNXAjtF0S",
            "2kUzt5LsTUR0ggquP7O3eN",
            "7iAqvWLgZzXvH38lA06QZg",
            "7IJlk42gDKt5dfSSLwtEsp",
            "3tBq5HUp8ZyIpe48zq2JOu",
            "2ZIaH69kaz55RM4Pjx6KXl",
            "5IyL3XOaRPpTgxVjRIAxXU",
            "4xidCbH5SfruBDZBtZ3lLk",
            "4V0x90QcMh4ZxwHzEWOdtK",
            "1L8H6AuK4TaMmolSL0N0mR",
            "7FwBtcecmlpc1sLySPXeGE",
            "0uXJSK6T4qQSEueNwXsWSt",
            "6zfczP87XO2SxWlQtnjFNa",
            "7DtdhIJlSSOaAFNk4JdXCb",
            "6QKfQbFqvUwzOHpwFwCaJ6",
            "6ooluO7DiEhI1zmK94nRCM",
            "2ly4nED24dIDLq4RWxHMFC",
            "60Pe9j2pCBa4Zp4ztf5nhd",
            "4O4Z8VFczL8MxIOmqVWc1b",
            "1xinPWdftWbbRmTXHvUjOW",
            "7eXESEtK5e9gDz7jLyOVDb",
            "3bBmpVl9rQKJsFFGLFilIS",
            "62GNy3YZzp9LxXavwaUZZw",
            "2QPuWjnOa6N5p8fGn3iGly",
            "73cn6vDBBOS74HXf27l9t4",
            "2agb1CPPGWXqXnrKn6cx7u",
            "4bHsxqR3GMrXTxEPLuK5ue",
            "4QlzkaRHtU8gAdwqjWmO8n",
            "2cYhGJbhvVareN1kFQiODe",
            "3f3HHRPF5vAo90GwdpDMaQ",
            "78dUBuP4dmw7krQz2yEI97",
            "41jRQuRpRQTgs27Ox2AeL4",
            "361VJCtpxxjA32lh4P0jZU",
            "4VbV8Zyjuu1qz0QteX1wVC",
            "3G3PP7pAkAaZ6QzM0duBry",
            "5YzBL3vkQnp3JbeDRRSbSQ",
            "2LmL53XRRZqvnXRb24UCRp",
            "4zguEJ2UaLe4zbEIDWqiVP",
            "1I4O4czyeGrvBH9RUtWzhz",
            "5xxfrTsLd4BJqfm18eRw9I",
            "3NWTRZ0A8xKlBP1qgNftql",
            "4NnWuGQujzWUEg0uZokO5M",
            "7IdTIjPXUc7bJQyabnmQiT",
            "2RlgNHKcydI9sayD2Df2xp",
            "3YBZIN3rekqsKxbJc9FZko",
            "44Yrt6xIUdcooTbDh57hrF",
            "3onYsieuDICdVt5ULZSExF",
            "4pbJqGIASGPr0ZpGpnWkDn",
            "61IBpJ6TymrEwd7bz3oPNp",
            "5qqabIl2vWzo9ApSC317sa",
            "61Abq4qxeAF0NL6kqdTif3",
            "6XUHsYE38CEbYunT983O9G",
            "6LbbHFEajG9e4m0G3L47c4",
            "5BvTfZQrTgu4buyXOekT3F",
            "178yi3jvbIHwnaxeAVUCD9",
            "6bqB7idfAnJVisSMQA1mZQ",
            "2NRRrr8ylDK38KD3Ffbw4K",
            "6sZRhv00LRKzFl8QpYiD1w",
            "0CdGm7k9PDrX9kY6OGNkFY",
            "2zaOCC7gNf9AzfJ5YvDalI",
            "5Yy3MkY3YEga1ecYOb2XqX",
            "48n00daIw01NSGXRqS3m7G",
            "7CFrqPv9yZCNNRMD9PgZrX",
            "6umL7Ne4hbRmRlK4vjvjpi",
            "4L2F0LcDVtNrFc1K4lmx3m",
            "2EC9IJj7g0mN1Q5VrZkiYY",
            "5FFQbvn7055P1DvgJDdCBP",
            "73C8W2PBSEbfoNIi1J93MN",
            "7wCN8IwqrTQpwkcWH5sP4o",
            "4UPLlFF10U3St7PaaQGPgi",
            "3lP4jIScaPeHfJlPN98jwV",
            "5h9Iek7Hp9wayRt7fBp7Ab",
            "516V4vS25xnGdVgkBWO6Wf",
            "0Js9hB2I66nJliPIJxzn2R",
            "48EjSdYh8wz2gBxxqzrsLe",
            "202QyrB6Q3Kimsr7KqJut3",
            "52PuLmsxTDOI2WAqpzYjoT",
            "0aym2LBJBk9DAYuHHutrIl",
            "5OQsiBsky2k2kDKy2bX2eT",
            "3PFaFVWq5wucLu6s4baj9D",
            "0MKGH8UMfCnq5w7nG06oM5",
            "0qG1teoBvooRo7Z5Z8edCk",
            "1Hgjpt0jdT9SNeOAMNZOt5",
            "3esjTrpXxTrJkCVjrQpcDB",
            "1ZxakFiRaOFj6CDarCxozU",
            "4f1n0muKxA870NYsPmraLN",
            "79LdvxXi5JYUjhnO7v9Fi3",
            "1fPLarHjgMC9QlsHfPijbr",
            "4Zc7TCHzuNwL0AFBlyLdyr",
            "5SmiUy0xpvtDAQDPTJdMOg",
            "66VLscP5FZHPeMmtWaopbJ",
            "5nVE45ithgyVocZp5XLAk6",
            "0v1XpBHnsbkCn7iJ9Ucr1l",
            "4vhVDkSx9RSb2k6mWFMYNI",
            "0iALOYqXaVoluUIsSyDAny",
            "7hLLBbUYRHURx2fhlSPIGS",
            "6ttNSzoCalhgsJhXHiE7tX",
            "4jEYbXkcIctffZOkcJONoO",
            "2YacpExEbX9tF8IbFlFOo4",
            "0rlfGg5Ym6J9AA97ah7voH"
        ],
        happiness: [
            "2Vi0fxL1fyE7KrKt3JihJn",
            "1FSWSs9CL01RCYxXtm08Rf",
            "2UVLuddklEVak5PXgC7baA",
            "5lA3pwMkBdd24StM90QrNR",
            "0Ph6L4l8dYUuXFmb71Ajnd",
            "4hGOhC87bn7JBdYykOJJvJ",
            "1gihuPhrLraKYrJMAEONyc",
            "0AkQbXGN4KG34TS7xLrM68",
            "1XkUmKLbm1tzVtrkdj2Ou8",
            "4jOtC832PyIXlCVPRElfQu",
            "714hERk9U1W8FMYkoC83CO",
            "1EzaEQ1hUWj7NWphY5Allw",
            "15HadeuRG9THazDGzLH8ZU",
            "5KL4iZkCTZyXl7KnHgfVDj",
            "4675yUu8AUbE72T94BkLCD",
            "0qi4b1l0eT3jpzeNHeFXDT",
            "5RBx3tM9hmVJAOnSUHIWkn",
            "4bk78jvK8Fe9YHqruOJW0v",
            "2PBOI7vYicqDaG9rYbycUO",
            "7KkzVlps826NezcpXPvEuV",
            "4At8zIlntcZaPorwdI69km",
            "6NGet2NFndj4XvpjH9iMvb",
            "0LAfANg75hYiV1IAEP3vY6",
            "23JZO56H9BEYQqedJSiDxZ",
            "3i3GeK0qLQybu4ah42YmCY",
            "2SwkHQpyK3Tq11RtJjQhJY",
            "3U3BXlwNTkCx7lW9m1H9RY",
            "717TY4sfgKQm4kFbYQIzgo",
            "1BXO5XG7ctHzjzpRRKlWZd",
            "6nzhhT57iQYrbqumru9NNP",
            "7w87IxuO7BDcJ3YUqCyMTT",
            "7kz6GbFr2MCI7PgXJOdq8c",
            "5lA6mFOvaiienokVbTZEQx",
            "386RUes7n1uM1yfzgeUuwp",
            "0GrrLYCH8u81aENhC8FBF4",
            "1qEHgdFqUxFebMPk8s2HLY",
            "7vIBxqsNQZ3PehEFQr1ZGt",
            "3mcG2NI5G5vhrQtRda1YnA",
            "7n9Q6bXSjm74uCtajkddPt",
            "42loEE51UDcecom9K8K4ei",
            "0D7L4pBEGv8ni1cRfaTdMJ",
            "74reD6Vha9tSy1ReFmyW40",
            "3LmpQiFNgFCnvAnhhvKUyI",
            "2UH4rbT5WrO2sDCanZI0vX",
            "4c6vZqYHFur11FbWATIJ9P",
            "2dzMbi6uW2EE4cgzxf8vcO",
            "2kyBz2bXWUQDL26Aigex0X",
            "368S2jjTfDk9Hk9x9YDzwj",
            "5WLhAmEGwePI2RD9ZECTw7",
            "0ifSeVGUr7py5GggttDhXw",
            "1dKm4a7TOYFzzTQvU59C59",
            "1CSLeVCXmetBh8IkTPMFdL",
            "5M5mzimlah21xlC1rAuIuY",
            "4nqHBebJbARDVzQ0urbzX0",
            "3AszgPDZd9q0DpDFt4HFBy",
            "5nNmj1cLH3r4aA4XDJ2bgY",
            "6Ac4NVYYl2U73QiTt11ZKd",
            "1fP3xQfPA2vPybTzyjweHJ",
            "3kb72STxc2959ZqsTwu52i",
            "7JoHtWZSie5aSbhVasDNEP",
            "2JvClsYrYfLz76Td6J9MPa",
            "6t0fYRoZlM5kQ9qT19JnbZ",
            "2qESkHBZ2VThboOnosYFBk",
            "60Ctoy2M8nmDaI7Fax3fTL",
            "3Y9xtYyVyF13po6xePV5Cp",
            "2Ml0l8YWJLQhPrRDLpQaDM",
            "5WSdMcWTKRdN1QYVJHJWxz",
            "27L8sESb3KR79asDUBu8nW",
            "6aGjEZ7kq3YXgD0EDt80O5",
            "11CeyEFt21BvAICfd4U8FA"
        ],
        neutral: [
            "2ihCaVdNZmnHZWt0fvAM7B",
            "2lFTzUnuGaWlWHJQokjRyb",
            "2JFmTONwQdRaOj2s2DhFah",
            "2UKYMN7VnsQo40n0qCt6Sa",
            "4o0NjemqhmsYLIMwlcosvW",
            "5snyhxAh55A2wlNRH7VVZJ",
            "5ULWOQncFghxDboleclsf7",
            "67Hna13dNDkZvBpTXRIaOJ",
            "7kSLdGdXLey7pzLsWpdg1h",
            "5eWOsyHHic4vJP3LjTVhqv",
            "0idc0XRnLRovVqpWnGQ6hC",
            "70y3OsCu7GBkJ3aqD94Agv",
            "249E7AgSyA4vhtXNEjQYb5",
            "4Li2WHPkuyCdtmokzW2007",
            "7zkLpY72g6lKQbiHDqri1S",
            "2QOMGq8wVTZbLmh7McrvgF",
            "27Ge0bPmJb6ZBPEXM4pmMZ",
            "0xM88xobymkMgg46MStfnV",
            "05pKAafT85jeeNhZ6kq7HT",
            "7wMq5n8mYSKlQIGECKUgTX",
            "4oeRfmp9XpKWym6YD1WvBP",
            "1x8AFBt9UEMRY41fSxi7aA",
            "05lBuZWQ2OhQuzoCSIkvUF",
            "1zuKjpp4t7BS8JPKi6mkQr",
            "1qfYG2JrchEyJiqKnkE7YQ",
            "3l5GdoaOPPVWRjIgbTBejJ",
            "1Hs085AOaoXrknVZExcE80",
            "3JvKfv6T31zO0ini8iNItO",
            "0mBkoM8r7KAQzZij5swTUL",
            "1mKXFLRA179hdOWQBwUk9e",
            "7Fw5i56my24ZBnGS7hFX2n",
            "3Otjx9ULpmWdUbkDTYDXHc",
            "5wQeCrJTJxGZnILnyCBHjI",
            "7J4gq1xNP3IsG6lDk0eSa7",
            "6t6oULCRS6hnI7rm0h5gwl",
            "6ybViy2qrO9sIi41EgRJgx",
            "2M9ro2krNb7nr7HSprkEgo",
            "6vODhpvfWwdsO0i9MBWnEq",
            "5IyblF777jLZj1vGHG2UD3",
            "75JFxkI2RXiU7L9VXzMkle",
            "30BsewEJZPxfuLNAlZPFje",
            "5nWbbQ0sIEabqPxAdqmh66",
            "4T8AdShKNGD6mZqEyLM1nz",
            "1mwt9hzaH7idmC5UCoOUkz",
            "4Y2W4zKa3q72ztbkA0r8Va",
            "3WS7spXVlbeC5kjePmHMQW",
            "3pD0f7hSJg2XdQ6udw5Tey",
            "14rApQTKycs9gNg7hjm9m7",
            "4DbmuOSxftTmltXNebpvl7",
            "2ZaYFNn1YQuLSVdHhanr4Q",
            "0d28khcov6AiegSCpG5TuT",
            "0Tel1fmuCxEFV6wBLXsEdk",
            "6ORqU0bHbVCRjXm9AjyHyZ",
            "6rxEjkoar48SssZePbtb2x",
            "5j82yGNCjpk6R50LgR4hHG",
            "1EZJBB6bvCcrvYRlOyoHuf",
            "1A2UmLDZzDmpdzUjEkCc3z",
            "5gf6t8j49qayhwrnd05uLI",
            "50uGbeaQIxKiSc7jvRTjWx",
            "4o8YocVCmZZimcqyY1Z5rO",
            "3xFvgh4mvJvBH2tf1tFJYl",
            "5HQVUIKwCEXpe7JIHyY734",
            "1EzrEOXmMH3G43AXT1y7pA",
            "4dHEQ1W1jRmNjjB0S7vB8V",
            "33e9HtOfO1ye1h8xQ7Foc9",
            "0ntQJM78wzOLVeCUAW7Y45",
            "1HyBdd35ssTpPU4Lytz7BI",
            "1zQX8Tf3fRYw8Djxh5kUKq",
            "3HfB5hBU0dmBt8T0iCmH42",
            "20S0KRq4z2v2Utym0C246s",
            "0Zw4llKeB35SIKASy1aLtV",
            "336ZYcU6poBWi3s8yzRcAD",
            "6b5rA9rthDbZDOQp9UbOgl",
            "6PcuC1LuoldUcOGegswbQp",
            "2RTAaSdjuoaJflDn3YKlls",
            "1wAXODAAL6hY64ZdhrnjBO",
            "47hs3xNT3iOGvgmC4eXBAi",
            "6jdOi5U5LBzQrc4c1VT983",
            "3y540Z9QFePg2CyZYWZMyI",
            "3MdYFBIzPf7lSJnI8wi3Ka",
            "4J8WVHRtXM6SMgsF7qohXy",
            "7vFv0yFGMJW3qVXbAd9BK9",
            "4Musyaro0NM5Awx8b5c627",
            "2yFh7Oz9g0bpHp3iis2Iu2",
            "5oUV6yWdDM0R9Q2CizRhIt",
            "1y4Kln6VEjQMpmHW7j9GeY",
            "5VFzIzR8nACf9Bad4O73f6",
            "0Xy9xPPs2zRRFqljGqKXel",
            "4IoYz8XqqdowINzfRrFnhi",
            "6nmVeODcBpsGKx5RPv003D",
            "7jqzZyJJLrpkRFYGpkqSK6",
            "38xWaVFKaxZlMFvzNff2aW",
            "5x86JP3jRMHIowmgZlhTRX",
            "3ZffCQKLFLUvYM59XKLbVm",
            "3SktMqZmo3M9zbB7oKMIF7",
            "5U8hKxSaDXB8cVeLFQjvwx",
            "5HkUwvLeE5Lhd2FZjuXncU",
            "5Fli1xRi01bvCjsZvKWro0",
            "6nVEdIiB3h5b2TbQhFnQUk",
            "4BDpHt1JrVQzaU7E6RBbXh"
        ],
        sadness: ["3l5GdoaOPPVWRjIgbTBejJ", "6oDPg7fXW3Ug3KmbafrXzA", "3YiM2jGwWrWRxyTTllIuhd", "3XVBdLihbNbxUwZosxcGuJ", "63xBKQr7HJkKaSyhwEWCnE", "7kSLdGdXLey7pzLsWpdg1h", "1EFddFVisHbqCHah6oBlhD", "7jqzZyJJLrpkRFYGpkqSK6", "3iGjPHGVRKPgQ6LvSN2zJI", "30Co9eN7JHPf1i2wEyVSMJ", "3B7udSGy2PfgoCniMSb523", "519uJbE3zyKLlToVA65PrP", "0mUyMawtxj1CJ76kn9gIZK", "4umQEKp1NQBzbk8k4egK7p", "7o9AYzTQfykIJ6HUt7FT0v", "2dBwB667LHQkLhdYlwLUZK", "4T2SmVJPtDdugk5j5xV1d5", "47ZWr1Nb0PUgmKgyg5JkgO", "05pKAafT85jeeNhZ6kq7HT", "5A2mJ5TGOBWTtYNGf4sLO0", "1JCCdiru7fhstOIF4N7WJC", "3wsZYuHJrk3lssa7V7jvye", "0SuG9kyzGRpDqrCWtgD6Lq", "142rTdgKhe55q9LdSU4cYF", "6RX5iL93VZ5fKmyvNXvF1r", "0fQlm2MUzqGDBPkuqq4U1Y", "1mea3bSkSGXuIRvnydlB5b", "1jF7IL57ayN4Ity3jQqGu0", "5UQGObp0GyFOEnza3RZLX8", "49kjlZP49LMD1MrrcvXDET", "4IoYz8XqqdowINzfRrFnhi", "2nMeu6UenVvwUktBCpLMK9", "4BXkf6yww23Vdju7E1fUrn", "7sapKrjDij2fpDVj0GxP66", "4RC5YmcpCbRsX3AtRzoQeh", "6FvSJjsxM3o5ctpexdB31e", "5OiaAaIMYlCZONyDBxqk4G", "0cWPe8mPRyLMxxe94eRVzs", "3kZC0ZmFWrEHdUCmUqlvgZ", "5r55eZvOijyYZRPCdQbu85", "4E0lSJ6c5unoku9UIZoJSl", "26658g5gaViKD0e3UYAqPE", "4kbz7rHVbyjKasuuqelccQ", "2JFEZO2ZxzffY0wd9MYEu3", "3U4isOIWM3VvDubwSI3y7a", "7gpy7sfWPNuOKmUNs3XQYE", "6JUALLwHnidbO4eM09ArIh", "4Musyaro0NM5Awx8b5c627", "1UmFRZU3taMGZApPhK32mc", "29i8axWOLDmgbiutJb9prB", "24lMtPOCzP5g4hrg3NklLa", "0vg4WnUWvze6pBOJDTq99k", "3goSVuTt3fDYDP6kRnFwuL", "3n9mzjgAzjyKawvbHzciXF", "4YjjNHtEsTX6Af4mCTupT5", "3PHYPaguCDKLK1a9cp3uXZ", "0nJW01T7XtvILxQgC5J7Wh", "2Y115i0IhELJhyyftvoSFt", "0rpIH5otu7ykvZPdcQuRPh", "3cdhgO3vgHyOIADMXokd2t", "4eHbdreAnSOrDDsFfc4Fpm", "6z5Yh7kOKeLjqIsNdokIpU", "2rJWnAqSuLMls0KOv416Io", "0GgN4MhR5GKn5IcKN0e0rG", "5JDcQAztvZTIkrWoZihgvC", "5dhQCqONiQji7k4RkhIcjq", "42i1pGtSyPVXNX71oW8dyg", "3c9LVPh3MpeFoaAL5DBDK5", "2M9ro2krNb7nr7HSprkEgo", "5l6hpyTGBK0LAAxgPnqTQL", "3pj6SiBe8SB7Fw31MjtwuZ", "1EzrEOXmMH3G43AXT1y7pA", "4wFUdSCer8bdQsrp1M90sa", "0z9UVN8VBHJ9HdfYsOuuNf", "0fBSs3fRoh1yJcne77fdu9", "714Lw0m2SmCEhKSPw0Dn8J", "2OuNgtXKeCSORKqdl0MxKk", "2WmDlNSXpyYgMK0ws7ZWDa", "21JTgoZLDB2F4Fx0uRCmTL", "5LFtkeNjLpZAey3Arj3h4M", "7z0JcZ8PQoAfUaLIXvbyTH", "3HfB5hBU0dmBt8T0iCmH42", "3husjxyCMBvNeiTEcrpPSe", "1Hs085AOaoXrknVZExcE80", "7utRJ4BeYx85khzP3lKoBX", "05lBuZWQ2OhQuzoCSIkvUF", "3xZMPZQYETEn4hjor3TR1A", "58CrldAc1Z5WIBozT1NMJH", "6LtPIXlIzPOTF8vTecYjRe", "3LmvfNUQtglbTrydsdIqFU", "0hCW6LbmFCYwM1uGmnjjNe", "7m2Ny5RefrEnAyOtNujSlb", "0xM88xobymkMgg46MStfnV", "1HNkqx9Ahdgi1Ixy2xkKkL", "4tCWWnk3BXinf7FllmSyHW", "0UAB340gAcSMk3r0a8PTag", "4K41YQFFNY45aAZXzBb9Q3", "4B3RmT3cGvh8By3WY9pbIx", "101TaHCVkpOMmlQNjPKRQ5", "5NTA3dsB2DlLaSG1KM6RTh"],
        surprise: [
            "01OLKKVYm0k4iCvUEMtwvR",
            "2mhskp9M7fQmYDoGirG4lW",
            "4sYSGuNQjoujPwhvEh33Gk",
            "31vsDR5lmLJiIwCxOphBrt",
            "09ISyLOPeuno7kKlzdbZuq",
            "6ajdh7Ltr6FHn6rsJT26X2",
            "3gaqDJsKJjQhX1ma1Zh2ul",
            "6l9w94tB1l3PJ6CIeCbi9b",
            "2szFjGRV7xkR0NlT0REHaW",
            "4Pqh5CEGsHNlvdpSOzvWGZ",
            "1MaUmStWjCj1K4G5JFu462",
            "6AAh49II2ET8rS8Cf4jneX",
            "2kkPrp1EZxquqKPRAmfq1M",
            "6FtMNibh9GStGC6MKy0mZ3",
            "20bYhwMjI3Rg8Sn82ZzQZI",
            "6jOUkpiyrWbU6x9qFryYPh",
            "49VVHyfX1PKvo1qD4Lpt0s",
            "19SJDO8Pd3yxzcLJqscpmT",
            "3Cx85bEA3r0Z6z1A5cYCxx",
            "2LCyCKLkSNP9tRIDGxDgJx",
            "1mcBAXFx7CsmRX7RzVtO4d",
            "7iORKG6ObCLhOwkuh0UcPo",
            "6PSTPLL7KFR74qebBxLcUG",
            "13gn6d8h6UeNEkjdp1U9HX",
            "6DI2vdKXvgnwQN3dPLJqbZ",
            "71AbGAzRseoTlMTQEknCE5",
            "5DlOSVDl31xFQH5lnSh1mM",
            "0Wkp7SIHcz86aYxEKaJd0E",
            "0M2QW9etM5qGkPvOZp1B1w",
            "44aNaaHvLcEUkjQmdwElpw",
            "32WM58NevKpfC4gatMSiMv",
            "2etaVb0yoh78di2uto4KZG",
            "2h7UuCsmcEVau7Ew05nKFf",
            "2tRMqvFRwUzHAyPUEgaGjr",
            "5qWROg5XRptGIAebSPscVV",
            "358y5FPR0zahtXileBXsa4",
            "1oOxrHFMtqzCmm9ZCcVCMk",
            "2D86FuBgs3yx6eLbgvoPam",
            "2giFm51iVhlmSbsjl1RJzw",
            "1uUaeIl9KwMUFbIhhk1sFO",
            "5MxMBEwBjRzFDHc3GRNEG9",
            "4rbr34ubSXVd2kCtss3JqY",
            "72pChh01pxw4minKLlFueI",
            "0VzUqszRqLrpQFB4B27wqz",
            "2Yp3n3eSGZ99im8DB640eC",
            "3rJZgmDE26oQSeF8xbJPNT",
            "5MziXgPpl5ueIWjweX71WB",
            "6MXpaxjLwMRASetjvU8qvG",
            "0fDzKLPV8YCi4WbzHdeWR8",
            "1o1T9Y1eqwo1or5Md4F8IF",
            "5hIqqWczlyHun9gEbov417",
            "1oqurvidPHPedOObv3TJbr",
            "0Nqn0bXrZFwYhDvhrCvUb3",
            "5irdIdByIFwZmKQroXthHV",
            "0FoxXe9AAtGXLMcIwH964l",
            "0XzQZ7FWvKrfsd0nUeOoeF",
            "1xTuwFluf6CXSn93uUbFOi",
            "0nbmSGAnSnBqCa1VlbGVGT",
            "5AWLy4tuwDzH8E6u9uK56O",
            "4IyRpT3Or5OlMvpANnr9YO",
            "3Zksah9tYvYZe7RYJR7B38",
            "20V3HbIWiGw5k61aQW2xZL",
            "5iWcSSuWGj8R1mKeSDDL9X",
            "394R6V3GKFl6ijmASXcrig",
            "4NSSyOKfuc0I510DU5FxGQ",
            "6NV6kJRWhBmfEzn0y0BAxE",
            "2WnvVdw6ON0G6WSZXpNAF0",
            "2JryrBWlRcHx7zrORHLu3U",
            "3DG41jyW4vE0MhUvyTOFaw",
            "2Jp1TARN71zLeGKXesNQuR",
            "4uEaNIEiyT1F3ZCUIYnywe",
            "4lTU1FDTVOJwpoSo3Pwisb",
            "2LcHjX0vSSJhGtOuAVj1kh",
            "1yvXznlX2NQbBfg1br0zOb",
            "5cbIPLnZmsX9KTb5v8WEAz",
            "7nDJRlWjzrQScIU1ZhVfU8",
            "6xMM6TGeuIjlAehVMN6gKj",
            "75N1RIHj5ciINovbWWszo4",
            "6NYSQMNzb75HLrpEVbEU1N",
            "6wsTj28kGBmeyP5GP2E6yy",
            "00kH51NuYkfz4bLmT3deA2",
            "6cOZjczCsQYcNmt2QpIb4b",
            "6LrGWrfNyn30SAeftYGD6i",
            "6iXKUrQatFwEaeBrqCVtuQ",
            "7pjzjFw0Tq6syGPlRQ4v1q",
            "2SgQvjr7exGRaAzB6EJmXZ",
            "62C0J7MKCgmd6JpaFs7Vbe",
            "07oxjlh0IHgaf2aDfqo612",
            "0XuZjNGZYTwaU14tCJRqnX",
            "189qvsEWm01oGmttXSIjRp",
            "2xMS1khdU5FHX1KEiNTVdi",
            "3aSxGEVFl96v7qnck0kDTJ",
            "7ypbQ7GLFRqZZELc50h6ZT",
            "37kk2Dq4AGiU4dPHcNe5eJ",
            "2ROTVgTovYv7Z4VS6f2908",
            "799pgta0anjwT2DGFRXyWD",
            "0OepqrnIYEKc1s0IKN2F45",
            "4OKrb7R2lKDKAAcjgoPxXG",
            "5q9t0DHsIaNBwKEnIJ9KkR",
            "2CbgDkfBn29SzmGjsilMrS"
        ],
    };

    //#endregion

    constructor(spotifyApi) {
        require('dotenv').config();
        this.spotifyApi = spotifyApi;
        this.features = ["danceability", "energy", "loudness", "speechiness", "acousticness", "instrumentalness", "liveness", "valence", "tempo"];
        this.refreshCredential = new RefreshCredential(this.spotifyApi);
    }

    getFeatures(mood) {
        if (!this.emotionMap[mood]) throw new Error.InvalidInputError("Not a recognized mood, cannot get audio Features");
        let numTracks = this.emotionMap[mood].length;

        return this.refreshCredential.tryRefreshCredential()
            .then(() => {
                return this.spotifyApi.getAudioFeaturesForTracks(this.emotionMap[mood]);
            })
            .then((res) => {
                if (!res || !res.body || !res.body["audio_features"]) throw new Error.InvalidResponseError("Could not get audio features from Emotion");
                let songFeatures = {};
                for (let feature of this.features) songFeatures[feature] = 0;
                for (let audioFeature of res.body["audio_features"]) {
                    for (let feature of this.features) {
                        songFeatures[feature] += audioFeature[feature];
                    }
                }
                for (let feature of this.features) {
                    songFeatures[feature] = songFeatures[feature] / numTracks;
                }

                let loudMIN = -60;
                let loudMAX = 0;
                let tempoMIN = 0;
                let tempoMAX = 250;
                songFeatures["loudness"] = (songFeatures["loudness"] - loudMIN) / (loudMAX - loudMIN);
                songFeatures["tempo"] = (songFeatures["tempo"] - tempoMIN) / (tempoMAX - tempoMIN);
                return songFeatures;
            })
            .catch((err) => {
                console.log(err);
                throw err;
            });
    }

    getDominantExpression(emotionData) {
        if (!this.isEmotionDataValid(emotionData)) throw new Error.InvalidInputError("cannot get dominant expression in Emotion, data isn't formatted correctly");

        let dominantEmotion = null;
        let dominantEmotionValue = -1;

        for (const [emotion, value] of Object.entries(emotionData)) {
            if (value > dominantEmotionValue) {
                dominantEmotion = emotion;
                dominantEmotionValue = value;
            }
        }
        if (dominantEmotionValue === -1) throw new Error.InvalidInputError("no dominant emotion detected");
        return dominantEmotion;
    }

    isEmotionDataValid(emotionData) {
        return emotionData && typeof emotionData === 'object' && !Array.isArray(emotionData);
    }

}

module.exports.Emotion = Emotion;